<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SpillTea â˜•</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />  <!-- Firebase -->  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>  <style>
    body{margin:0;font-family:system-ui;background:#0e0e11;color:#fff}
    button,input,textarea{background:#1c1c22;color:#fff;border:none;border-radius:8px;padding:10px}
    button{cursor:pointer}
    .hidden{display:none}
    .card{background:#16161d;padding:15px;border-radius:14px;margin:10px}
    nav{display:flex;gap:10px;position:fixed;bottom:0;width:100%;background:#111;padding:10px}
    nav button{flex:1}
    textarea{width:100%;resize:none}
    input{width:100%}
  </style></head>
<body><!-- AUTH --><div id="auth" class="card">
  <h2>SpillTea â˜•</h2>
  <input id="email" placeholder="Email" />
  <input id="password" type="password" placeholder="Password" />
  <button id="loginBtn">Login</button>
  <button id="signupBtn">Signup</button>
</div><!-- PROFILE MODAL --><div id="profileModal" class="card hidden">
  <h3>Complete Profile</h3>
  <input id="username" placeholder="Username" />
  <textarea id="bio" placeholder="Bio"></textarea>
  <input id="dob" type="date" />
  <button id="saveProfile">Save</button>
</div><!-- HOME --><div id="home" class="hidden">
  <div class="card">
    <textarea id="teaInput" placeholder="Spill your tea â˜•"></textarea>
    <button id="postTea">Spill</button>
  </div>
  <div id="feed"></div>
</div><!-- PROFILE --><div id="profile" class="hidden card"></div><nav class="hidden" id="nav">
  <button onclick="showPage('home')">Home</button>
  <button onclick="showPage('profile')">Profile</button>
  <button onclick="logout()">Logout</button>
</nav><script>
// ðŸ”¥ FIREBASE CONFIG (ADD YOURS)
firebase.initializeApp({
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_DOMAIN",
  projectId: "YOUR_PROJECT_ID"
});

const auth=firebase.auth();
const db=firebase.firestore();

// DOM
const authBox=document.getElementById('auth');
const home=document.getElementById('home');
const profile=document.getElementById('profile');
const nav=document.getElementById('nav');
const modal=document.getElementById('profileModal');

const email=document.getElementById('email');
const password=document.getElementById('password');
const username=document.getElementById('username');
const bio=document.getElementById('bio');
const dob=document.getElementById('dob');

const teaInput=document.getElementById('teaInput');
const feed=document.getElementById('feed');

let currentUser=null;

// AUTH
loginBtn.onclick=()=>auth.signInWithEmailAndPassword(email.value,password.value);
signupBtn.onclick=()=>auth.createUserWithEmailAndPassword(email.value,password.value);

// AUTH STATE
auth.onAuthStateChanged(async user=>{
 if(!user){
  authBox.classList.remove('hidden');
  home.classList.add('hidden');
  nav.classList.add('hidden');
  return;
 }
 currentUser=user;
 authBox.classList.add('hidden');
 nav.classList.remove('hidden');

 const doc=await db.collection('users').doc(user.uid).get();
 if(!doc.exists){
  modal.classList.remove('hidden');
 }else{
  showPage('home');
  loadFeed();
 }
});

// SAVE PROFILE
saveProfile.onclick=async()=>{
 if(!username.value.trim()) return alert('Username required');
 await db.collection('users').doc(currentUser.uid).set({
  username:username.value,
  bio:bio.value,
  dob:dob.value,
  followers:0,
  posts:0
 });
 modal.classList.add('hidden');
 showPage('home');
 loadFeed();
};

// POST TEA
postTea.onclick=async()=>{
 if(!teaInput.value.trim()) return;
 await db.collection('posts').add({
  uid:currentUser.uid,
  text:teaInput.value,
  likes:[],
  time:Date.now()
 });
 teaInput.value='';
 loadFeed();
};

// LOAD FEED
async function loadFeed(){
 feed.innerHTML='';
 const snap=await db.collection('posts').orderBy('time','desc').get();
 snap.forEach(d=>{
  const p=d.data();
  const div=document.createElement('div');
  div.className='card';
  div.innerHTML=`<p>${p.text}</p><small>${p.likes.length} likes</small>`;
  feed.appendChild(div);
 });
}

// PROFILE PAGE
async function loadProfile(){
 const doc=await db.collection('users').doc(currentUser.uid).get();
 const u=doc.data();
 profile.innerHTML=`
  <h3>@${u.username}</h3>
  <p>${u.bio||''}</p>
  <p>Followers: ${u.followers}</p>
  <p>Posts: ${u.posts}</p>`;
}

function showPage(p){
 home.classList.add('hidden');
 profile.classList.add('hidden');
 if(p==='home') home.classList.remove('hidden');
 if(p==='profile'){ profile.classList.remove('hidden'); loadProfile(); }
}

function logout(){ auth.signOut(); }
</script></body>
</html>
